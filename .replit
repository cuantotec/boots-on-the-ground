
# Language and environment
language = "nodejs"

# Entry point (not used for static deployments)
entrypoint = "client/index.html"
modules = ["nodejs-20"]

# Run configuration for development
[nix]
channel = "stable-24_05"

[gitHubImport]
requiredFiles = [".replit", "replit.nix"]

# Deployment configuration
[deployment]
deploymentTarget = "static"
publicDir = "dist"
buildCommand = "npm run build"

# Static deployment rewrites for SPA routing
[[deployment.rewrites]]
from = "/*"
to = "/index.html"

# Optional: Custom headers for better performance
[[deployment.responseHeaders]]
path = "*.js"
name = "Cache-Control"
value = "public, max-age=31536000, immutable"

[[deployment.responseHeaders]]
path = "*.css"
name = "Cache-Control"
value = "public, max-age=31536000, immutable"

[[deployment.responseHeaders]]
path = "*.png"
name = "Cache-Control"
value = "public, max-age=31536000, immutable"

[[deployment.responseHeaders]]
path = "*.jpg"
name = "Cache-Control"
value = "public, max-age=31536000, immutable"

[[deployment.responseHeaders]]
path = "*.svg"
name = "Cache-Control"
value = "public, max-age=31536000, immutable"

[workflows]
runButton = "Development Server"

[[workflows.workflow]]
name = "Development Server"
author = 42240710
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run dev"

[[ports]]
localPort = 5000
externalPort = 80
